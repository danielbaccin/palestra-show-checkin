<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="pt-BR"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta charset="UTF-8" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;title&gt;Check-in Evento&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0" /&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;!-- Biblioteca de leitura QR --&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"&gt;&lt;/script&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>body {</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin: 0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-family: Arial, Helvetica, sans-serif;</p>
<p class="p1"><span class="Apple-converted-space">      </span>background: #111;</p>
<p class="p1"><span class="Apple-converted-space">      </span>color: #fff;</p>
<p class="p1"><span class="Apple-converted-space">      </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">      </span>flex-direction: column;</p>
<p class="p1"><span class="Apple-converted-space">      </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>h1 {</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin: 10px 0;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>#reader {</p>
<p class="p1"><span class="Apple-converted-space">      </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">      </span>max-width: 400px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin-top: 10px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>#result {</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin-top: 20px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>width: 90%;</p>
<p class="p1"><span class="Apple-converted-space">      </span>max-width: 400px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>padding: 20px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-radius: 12px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>text-align: center;</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-size: 22px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>display: none;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>.ok {</p>
<p class="p1"><span class="Apple-converted-space">      </span>background: #0a7a29;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>.error {</p>
<p class="p1"><span class="Apple-converted-space">      </span>background: #a10000;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>.info {</p>
<p class="p1"><span class="Apple-converted-space">      </span>background: #333;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>button {</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin-top: 15px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>padding: 15px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-size: 20px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border: none;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-radius: 10px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>button.confirm {</p>
<p class="p1"><span class="Apple-converted-space">      </span>background: #00c853;</p>
<p class="p1"><span class="Apple-converted-space">      </span>color: #000;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>button.cancel {</p>
<p class="p1"><span class="Apple-converted-space">      </span>background: #444;</p>
<p class="p1"><span class="Apple-converted-space">      </span>color: #fff;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>.small {</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-size: 16px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>opacity: 0.8;</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin-top: 5px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;body&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;h1&gt;Check-in&lt;/h1&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;div id="reader"&gt;&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;div id="result" class="info"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="message"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="small" id="details"&gt;&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;button class="confirm" id="confirmBtn"&gt;CONFIRMAR ENTRADA&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;button class="cancel" id="cancelBtn"&gt;CANCELAR&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>/*************** CONFIGURAÇÃO *****************/</p>
<p class="p1"><span class="Apple-converted-space">    </span>const PREVIEW_URL = "https://SEU_N8N/webhook/checkin/preview";</p>
<p class="p1"><span class="Apple-converted-space">    </span>const CONFIRM_URL = "https://SEU_N8N/webhook/checkin/confirm";</p>
<p class="p1"><span class="Apple-converted-space">    </span>const AUTH_TOKEN = "EVENTO-PALESTRA-2026";</p>
<p class="p1"><span class="Apple-converted-space">    </span>/*********************************************/</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>let currentId = null;</p>
<p class="p1"><span class="Apple-converted-space">    </span>let locked = false;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const resultDiv = document.getElementById("result");</p>
<p class="p1"><span class="Apple-converted-space">    </span>const messageDiv = document.getElementById("message");</p>
<p class="p1"><span class="Apple-converted-space">    </span>const detailsDiv = document.getElementById("details");</p>
<p class="p1"><span class="Apple-converted-space">    </span>const confirmBtn = document.getElementById("confirmBtn");</p>
<p class="p1"><span class="Apple-converted-space">    </span>const cancelBtn = document.getElementById("cancelBtn");</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function showResult(type, message, details = "") {</p>
<p class="p1"><span class="Apple-converted-space">      </span>resultDiv.className = "";</p>
<p class="p1"><span class="Apple-converted-space">      </span>resultDiv.classList.add(type);</p>
<p class="p1"><span class="Apple-converted-space">      </span>messageDiv.innerText = message;</p>
<p class="p1"><span class="Apple-converted-space">      </span>detailsDiv.innerText = details;</p>
<p class="p1"><span class="Apple-converted-space">      </span>resultDiv.style.display = "block";</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function reset() {</p>
<p class="p1"><span class="Apple-converted-space">      </span>resultDiv.style.display = "none";</p>
<p class="p1"><span class="Apple-converted-space">      </span>currentId = null;</p>
<p class="p1"><span class="Apple-converted-space">      </span>locked = false;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>cancelBtn.onclick = reset;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>confirmBtn.onclick = async () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!currentId) return;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>try {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const res = await fetch(CONFIRM_URL, {</p>
<p class="p1"><span class="Apple-converted-space">          </span>method: "POST",</p>
<p class="p1"><span class="Apple-converted-space">          </span>headers: {</p>
<p class="p1"><span class="Apple-converted-space">            </span>"Content-Type": "application/json",</p>
<p class="p1"><span class="Apple-converted-space">            </span>"Authorization": "Bearer " + AUTH_TOKEN</p>
<p class="p1"><span class="Apple-converted-space">          </span>},</p>
<p class="p1"><span class="Apple-converted-space">          </span>body: JSON.stringify({ id: currentId })</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const data = await res.json();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>if (data.status === "OK") {</p>
<p class="p1"><span class="Apple-converted-space">          </span>navigator.vibrate?.(200);</p>
<p class="p1"><span class="Apple-converted-space">          </span>showResult("ok", "✅ ENTRADA LIBERADA");</p>
<p class="p1"><span class="Apple-converted-space">          </span>setTimeout(reset, 1200);</p>
<p class="p1"><span class="Apple-converted-space">        </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">          </span>showResult("error", "❌ " + data.message);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>} catch (e) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>showResult("error", "Erro ao confirmar");</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function onScanSuccess(text) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (locked) return;</p>
<p class="p1"><span class="Apple-converted-space">      </span>locked = true;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>let id = text;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>try {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const parsed = JSON.parse(text);</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (parsed.id) id = parsed.id;</p>
<p class="p1"><span class="Apple-converted-space">      </span>} catch {}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>currentId = id;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>fetch(PREVIEW_URL, {</p>
<p class="p1"><span class="Apple-converted-space">        </span>method: "POST",</p>
<p class="p1"><span class="Apple-converted-space">        </span>headers: { "Content-Type": "application/json" },</p>
<p class="p1"><span class="Apple-converted-space">        </span>body: JSON.stringify({ id })</p>
<p class="p1"><span class="Apple-converted-space">      </span>})</p>
<p class="p1"><span class="Apple-converted-space">        </span>.then(r =&gt; r.json())</p>
<p class="p1"><span class="Apple-converted-space">        </span>.then(data =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">          </span>if (data.status === "VALIDO") {</p>
<p class="p1"><span class="Apple-converted-space">            </span>showResult(</p>
<p class="p1"><span class="Apple-converted-space">              </span>"ok",</p>
<p class="p1"><span class="Apple-converted-space">              </span>"INGRESSO VÁLIDO",</p>
<p class="p1"><span class="Apple-converted-space">              </span>`Tipo: ${data.type || "-"}`</p>
<p class="p1"><span class="Apple-converted-space">            </span>);</p>
<p class="p1"><span class="Apple-converted-space">          </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">            </span>showResult("error", "❌ " + data.message);</p>
<p class="p1"><span class="Apple-converted-space">          </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>})</p>
<p class="p1"><span class="Apple-converted-space">        </span>.catch(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">          </span>showResult("error", "Erro de conexão");</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const html5QrCode = new Html5Qrcode("reader");</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>Html5Qrcode.getCameras().then(cameras =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (cameras.length === 0) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>alert("Nenhuma câmera encontrada");</p>
<p class="p1"><span class="Apple-converted-space">        </span>return;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>html5QrCode.start(</p>
<p class="p1"><span class="Apple-converted-space">        </span>cameras[0].id,</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ fps: 10, qrbox: 250 },</p>
<p class="p1"><span class="Apple-converted-space">        </span>onScanSuccess</p>
<p class="p1"><span class="Apple-converted-space">      </span>);</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
